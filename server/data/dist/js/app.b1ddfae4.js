(function(){"use strict";var e={526:function(e,t,a){var s=a(963),i=a(252),r=a(577);const n={class:"header"},l=(0,i.Uk)("Home"),o={key:0};function d(e,t,a,s,d,c){const h=(0,i.up)("router-link"),u=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",n,[(0,i.Wm)(h,{id:"home-button",class:"home-button",to:"/"},{default:(0,i.w5)((()=>[l])),_:1}),(0,i._)("button",{id:"login-button",class:"",onClick:t[0]||(t[0]=(...e)=>c.login42&&c.login42(...e))},"Login"),(0,i._)("button",{id:"logout-button",class:"logout-button",onClick:t[1]||(t[1]=(...e)=>c.logoutAPI&&c.logoutAPI(...e))},"Logout"),d.errorMsg?((0,i.wg)(),(0,i.iD)("div",o,(0,r.zw)(d.errorMsg),1)):(0,i.kq)("",!0)]),(0,i.Wm)(u)])}var c=a(669),h=a.n(c),u={data(){return{errorMsg:""}},methods:{login42(){window.location.href=`http://api.intra.42.fr/oauth/authorize?client_id=${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_AUTH_API_ID}&redirect_uri=${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_AUTH_API_REDIRECT_URI}&response_type=code`},logoutAPI(){h().post("http://localhost:3000/authentication/logout",null,{withCredentials:!0}).then((e=>{console.log(e),this.errorMsg="Successfully logged out!"})).catch((e=>{console.log(e),this.errorMsg="Error: "+e.response.data.message}))}}},g=a(744);const m=(0,g.Z)(u,[["render",d]]);var p=m,v=a(119);const w={class:"home"},f={class:"menu"},b=(0,i.Uk)("Play"),y=(0,i.Uk)("Friends"),k=(0,i.Uk)("Profile"),_=(0,i.Uk)("Chat"),C=(0,i.Uk)("Scoreboard"),D=(0,i.Uk)("Two Factor"),P=(0,i.Uk)("Login Two Factor");function S(e,t,a,s,r,n){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("div",f,[(0,i.Wm)(l,{class:"menu-button",to:"/test"},{default:(0,i.w5)((()=>[b])),_:1}),(0,i.Wm)(l,{class:"menu-button",to:"/friends"},{default:(0,i.w5)((()=>[y])),_:1}),(0,i.Wm)(l,{class:"menu-button",to:"/profile"},{default:(0,i.w5)((()=>[k])),_:1}),(0,i.Wm)(l,{class:"menu-button",to:"/chat"},{default:(0,i.w5)((()=>[_])),_:1}),(0,i.Wm)(l,{class:"menu-button",to:"/scoreboard"},{default:(0,i.w5)((()=>[C])),_:1}),(0,i.Wm)(l,{class:"menu-button",to:"/2fa"},{default:(0,i.w5)((()=>[D])),_:1}),(0,i.Wm)(l,{class:"menu-button",to:"/login2fa"},{default:(0,i.w5)((()=>[P])),_:1})])])}var U=a(665),F={name:"HomeView",setup(){const{cookies:e}=(0,U.fP)();return{cookies:e}},mounted(){const e=this.cookies.get("Authentication");e&&(connsole.log("cookie found"),h().get("http://localhost:3000/users/myuser",{headers:{Authorization:"Bearer "+this.$cookies.get("Authentication")}}).then((e=>{console.log("user",e.data),this.$store.commit("setCurrentUser",e.data)})).catch((e=>{console.log(e)})))},methods:{}};const x=(0,g.Z)(F,[["render",S],["__scopeId","data-v-6ca3a4b3"]]);var q=x;const A=e=>((0,i.dD)("data-v-70b2e6fe"),e=e(),(0,i.Cn)(),e),B={class:"wrapper"},E=A((()=>(0,i._)("h2",null,"Login Two Factor",-1))),H=A((()=>(0,i._)("label",{for:"2FACode"},"Google Authenticator Code: ",-1))),I=A((()=>(0,i._)("br",null,null,-1))),R={key:0},M=["src"],L=A((()=>(0,i._)("div",{class:"login"},[(0,i._)("button",null,"Send")],-1)));function T(e,t,a,n,l,o){return(0,i.wg)(),(0,i.iD)("div",B,[E,(0,i._)("form",{onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>o.login2FA&&o.login2FA(...e)),["prevent"]))},[(0,i._)("div",null,[(0,i._)("h3",null,[H,I,(0,i.wy)((0,i._)("input",{type:"text",id:"2FACode","onUpdate:modelValue":t[0]||(t[0]=e=>l.formData.twoFactorAuthenticationCode=e)},null,512),[[s.nr,l.formData.twoFactorAuthenticationCode]])])]),l.errorMsg?((0,i.wg)(),(0,i.iD)("h3",R,(0,r.zw)(l.errorMsg),1)):(0,i.kq)("",!0),this.qrCode?((0,i.wg)(),(0,i.iD)("img",{key:1,src:this.qrCode},null,8,M)):(0,i.kq)("",!0),L],32)])}var O={name:"login2FAView",data(){return{formData:{twoFactorAuthenticationCode:""},errorMsg:""}},methods:{login2FA(){if(""==this.formData.code)return console.log("No code provided!"),void(this.errorMsg="Please enter your code!");h().post("http://localhost:3000/2fa/authenticate",this.formData,{withCredentials:!0}).then((e=>{console.log(e),this.errorMsg="Successfully logged in with 2FA!"})).catch((e=>{console.log(e),this.errorMsg="Error while login!"})),this.formData.code=""}}};const z=(0,g.Z)(O,[["render",T],["__scopeId","data-v-70b2e6fe"]]);var G=z;function Y(e,t,a,s,r,n){const l=(0,i.up)("GetScore");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l)])}const N={key:0},V=(0,i._)("hr",null,null,-1),W=(0,i._)("hr",null,null,-1);function $(e,t,a,s,n,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>l.getUsers&&l.getUsers(...e))},"Reload"),n.errorMsg?((0,i.wg)(),(0,i.iD)("h3",N,(0,r.zw)(n.errorMsg),1)):(0,i.kq)("",!0),V,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.scores,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id},[(0,i._)("p",null,(0,r.zw)(e.playerOneId)+":"+(0,r.zw)(e.playerTwoId)+":"+(0,r.zw)(e.scorePlayerOne)+":"+(0,r.zw)(e.scorePlayerTwo)+":"+(0,r.zw)(e.gameType)+":"+(0,r.zw)(e.timestamp),1),W])))),128))])}var Z={name:"GetScore",created(){this.getUsers()},data(){return{scores:[],errorMsg:""}},methods:{getUsers(){h().get("http://localhost:3000/score/all",{withCredentials:!0}).then((e=>{console.log(e.data),this.scores=e.data})).catch((e=>{console.log(e),this.errorMsg="Error receiving data!"}))}}};const j=(0,g.Z)(Z,[["render",$]]);var X=j,K={name:"GetScoreView",components:{GetScore:X}};const J=(0,g.Z)(K,[["render",Y]]);var Q=J;const ee=e=>((0,i.dD)("data-v-132c4ab4"),e=e(),(0,i.Cn)(),e),te={class:"wrapper"},ae=ee((()=>(0,i._)("h2",null,"Two Factor",-1))),se={class:"login"},ie=ee((()=>(0,i._)("label",{for:"2FACode"},"Code: ",-1))),re={key:0},ne=["src"],le=ee((()=>(0,i._)("div",{class:"login"},[(0,i._)("button",null,"Send")],-1)));function oe(e,t,a,n,l,o){return(0,i.wg)(),(0,i.iD)("div",te,[ae,(0,i._)("div",se,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>o.gen_qrcode&&o.gen_qrcode(...e))},"Gen Code")]),(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>o.send2FA&&o.send2FA(...e)),["prevent"]))},[(0,i._)("div",null,[(0,i._)("h3",null,[ie,(0,i.wy)((0,i._)("input",{type:"text",id:"2FACode","onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.twoFactorAuthenticationCode=e)},null,512),[[s.nr,l.formData.twoFactorAuthenticationCode]])])]),l.errorMsg?((0,i.wg)(),(0,i.iD)("h3",re,(0,r.zw)(l.errorMsg),1)):(0,i.kq)("",!0),this.qrCode?((0,i.wg)(),(0,i.iD)("img",{key:1,src:this.qrCode},null,8,ne)):(0,i.kq)("",!0),le],32)])}var de={name:"send2FA",data(){return{formData:{twoFactorAuthenticationCode:""},errorMsg:"",qrCode:""}},methods:{send2FA(){if(""==this.formData.code)return console.log("No code provided!"),void(this.errorMsg="Please enter your code!");h().post("http://localhost:3000/2fa/turn-on",this.formData,{withCredentials:!0}).then((e=>{console.log(e),this.errorMsg="Successfully activated 2FA!"})).catch((e=>{console.log(e),this.errorMsg="Error while login!"})),this.formData.code=""},gen_qrcode(){this.qrCode="http://localhost:3000/2fa/generate?"+(new Date).getTime(),console.log(1)}}};const ce=(0,g.Z)(de,[["render",oe],["__scopeId","data-v-132c4ab4"]]);var he=ce;const ue=e=>((0,i.dD)("data-v-19015c3c"),e=e(),(0,i.Cn)(),e),ge={class:"wrapper"},me=ue((()=>(0,i._)("h2",null,"Friends",-1))),pe=ue((()=>(0,i._)("h3",null,"Change Tab",-1))),ve={class:"tabs"},we=["onClick"];function fe(e,t,a,s,n,l){return(0,i.wg)(),(0,i.iD)("div",ge,[me,pe,(0,i._)("div",ve,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.tabs,(e=>((0,i.wg)(),(0,i.iD)("button",{key:e,onClick:t=>n.currentTab=e},(0,r.zw)(e),9,we)))),128))]),((0,i.wg)(),(0,i.j4)(i.Ob,null,[((0,i.wg)(),(0,i.j4)((0,i.LL)(l.currentTabComponent),{onEventHappened:l.updateUsers,usersData:n.usersData},null,40,["onEventHappened","usersData"]))],1024))])}const be={class:"card"},ye=["src"],ke={class:"user-info"},_e={class:"username"},Ce={class:"cyan-text status"},De={class:"buttons"},Pe={style:{color:"red"}};function Se(e,t,a,s,n,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",be,[(0,i._)("img",{id:"profile-pic",src:l.imageLink,width:"45",height:"45"},null,8,ye),(0,i._)("div",ke,[(0,i._)("span",_e,(0,r.zw)(a.data.username),1),(0,i._)("span",Ce,(0,r.zw)(l.userStatus),1)]),(0,i._)("div",De,[a.addButton?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"green-button",onClick:t[0]||(t[0]=(...e)=>l.sendFriendRequest&&l.sendFriendRequest(...e))},"+")):(0,i.kq)("",!0),a.retrieveButton?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"yellow-button",onClick:t[1]||(t[1]=(...e)=>l.retrieveFriendRequest&&l.retrieveFriendRequest(...e))},"-")):(0,i.kq)("",!0),a.deleteButton?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"red-button",onClick:t[2]||(t[2]=(...e)=>l.deleteFriend&&l.deleteFriend(...e))},"X")):(0,i.kq)("",!0),a.acceptButton?((0,i.wg)(),(0,i.iD)("button",{key:3,class:"green-button",onClick:t[3]||(t[3]=(...e)=>l.acceptFriend&&l.acceptFriend(...e))},"âœ”")):(0,i.kq)("",!0),a.declineButton?((0,i.wg)(),(0,i.iD)("button",{key:4,class:"red-button",onClick:t[4]||(t[4]=(...e)=>l.declineFriend&&l.declineFriend(...e))},"X")):(0,i.kq)("",!0)])]),(0,i._)("div",Pe,(0,r.zw)(n.errorMsg),1)])}var Ue={name:"UserCard",emits:["eventHappened"],props:{data:{required:!0},addButton:{type:Boolean,default:!1},retrieveButton:{type:Boolean,default:!1},deleteButton:{type:Boolean,default:!1},acceptButton:{type:Boolean,default:!1},declineButton:{type:Boolean,default:!1}},data(){return{errorMsg:""}},methods:{async sendFriendRequest(){await h().post("http://localhost:3000/users/friend/add/"+this.data.id,null,{withCredentials:!0}).then((e=>{console.log(e),this.$emit("eventHappened")})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async retrieveFriendRequest(){await h().post("http://localhost:3000/users/friend/retrieve/"+this.data.id,null,{withCredentials:!0}).then((e=>{console.log(e),this.$emit("eventHappened")})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async deleteFriend(){await h().post("http://localhost:3000/users/friend/remove/"+this.data.id,null,{withCredentials:!0}).then((e=>{console.log(e),this.$emit("eventHappened")})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async acceptFriend(){await h().post("http://localhost:3000/users/friend/accept/"+this.data.id,null,{withCredentials:!0}).then((e=>{console.log(e),this.$emit("eventHappened")})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async declineFriend(){await h().post("http://localhost:3000/users/friend/decline/"+this.data.id,null,{withCredentials:!0}).then((e=>{console.log(e),this.$emit("eventHappened")})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))}},computed:{userStatus(){switch(this.data.status){case 0:return"offline";case 1:return"online";case 2:return"in game";case 3:return"do not disturb"}},statusColor(){switch(this.data.status){case 0:return"red-text";case 1:return"green-text";case 2:return"cyan-text";case 3:return"yellow-text"}},imageLink(){return"http://localhost:3000/database-files/"+this.data.avatarId}}};const Fe=(0,g.Z)(Ue,[["render",Se],["__scopeId","data-v-a1af94d4"]]);var xe=Fe;const qe=e=>((0,i.dD)("data-v-0e741c55"),e=e(),(0,i.Cn)(),e),Ae={class:"friends"},Be=qe((()=>(0,i._)("h3",null,"My Friends",-1))),Ee={key:0};function He(e,t,a,s,r,n){const l=(0,i.up)("UserCard");return(0,i.wg)(),(0,i.iD)("div",Ae,[Be,a.usersData.friendsList?((0,i.wg)(),(0,i.iD)("div",Ee,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.orderedFriendsList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i.Wm)(l,{onEventHappened:n.emitEvent,class:"user-card",data:e,deleteButton:!0},null,8,["onEventHappened","data"])])))),128))])):(0,i.kq)("",!0)])}var Ie=a(486),Re=a.n(Ie),Me={name:"FriendsList",emits:["eventHappened"],props:{usersData:{required:!0}},components:{UserCard:xe},methods:{emitEvent(){this.$emit("eventHappened")}},computed:{filteredUsers(){let e=new RegExp(this.filterText,"i");return this.usersData.otherUsers.filter((t=>t.username.match(e)))},orderedFriendsList(){return Re().orderBy(this.usersData.friendsList,"username")}}};const Le=(0,g.Z)(Me,[["render",He],["__scopeId","data-v-0e741c55"]]);var Te=Le;const Oe=e=>((0,i.dD)("data-v-adc78774"),e=e(),(0,i.Cn)(),e),ze={class:"friends"},Ge=Oe((()=>(0,i._)("h3",null,"Find Friends",-1))),Ye={key:0};function Ne(e,t,a,r,n,l){const o=(0,i.up)("UserCard");return(0,i.wg)(),(0,i.iD)("div",ze,[Ge,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.filterText=e),placeholder:"search user"},null,512),[[s.nr,n.filterText]]),l.filteredUsers?((0,i.wg)(),(0,i.iD)("div",Ye,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.orderedFilteredUsers,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i.Wm)(o,{onEventHappened:l.emitEvent,class:"user-card",data:e,addButton:!l.sentRequest(e.id)&&!l.isFriend(e.id),retrieveButton:l.sentRequest(e.id)&&!l.isFriend(e.id)},null,8,["onEventHappened","data","addButton","retrieveButton"])])))),128))])):(0,i.kq)("",!0)])}var Ve={name:"FriendsFind",emits:["eventHappened"],data(){return{filterText:""}},components:{UserCard:xe},props:{usersData:{required:!0}},computed:{filteredUsers(){let e=new RegExp(this.filterText,"i");return this.usersData.otherUsers.filter((t=>t.username.match(e)))},orderedFilteredUsers(){return Re().orderBy(this.filteredUsers,"username")}},methods:{emitEvent(){this.$emit("eventHappened")},sentRequest(e){return!(!this.usersData.currentUser||!this.usersData.currentUser.sendFriendRequests.includes(e.toString()))},isFriend(e){return!(!this.usersData.currentUser||!this.usersData.currentUser.friends.includes(e.toString()))}}};const We=(0,g.Z)(Ve,[["render",Ne],["__scopeId","data-v-adc78774"]]);var $e=We;const Ze=e=>((0,i.dD)("data-v-193ba58d"),e=e(),(0,i.Cn)(),e),je={class:"friends"},Xe=Ze((()=>(0,i._)("h3",null,"Friend Requests",-1)));function Ke(e,t,a,s,r,n){const l=(0,i.up)("UserCard");return(0,i.wg)(),(0,i.iD)("div",je,[Xe,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.orderedRequestsList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i.Wm)(l,{onEventHappened:n.emitEvent,class:"user-card",data:e,declineButton:!0,acceptButton:!0},null,8,["onEventHappened","data"])])))),128))])}var Je={name:"FriendsRequest",emits:["eventHappened"],props:{usersData:{required:!0}},components:{UserCard:xe},methods:{emitEvent(){this.$emit("eventHappened")}},computed:{orderedRequestsList(){return Re().orderBy(this.usersData.requestList,"username")}}};const Qe=(0,g.Z)(Je,[["render",Ke],["__scopeId","data-v-193ba58d"]]);var et=Qe,tt={name:"FriendsView",components:{UserCard:xe,FriendsList:Te,FriendsFind:$e,FriendsRequest:et},data(){return{response:null,errorMsg:"",currentTab:"List",tabs:["List","Find","Request"],usersData:{allUsers:[],otherUsers:null,friendsList:[],requestList:[],currentUser:null}}},computed:{currentTabComponent(){return"Friends"+this.currentTab}},methods:{async updateUsers(){console.log("update Users"),await this.getAllUsers(),await this.getAllOtherUsers(),await this.getCurrentUser(),this.createFriendsList(this.usersData.currentUser.friends),this.createRequestsList()},async getUserByID(e){return console.log("getUserByID"),await h().get("http://localhost:3000/users/search/id/"+e,{withCredentials:!0}).then((e=>e.data)).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async getAllUsers(){await h().get("http://localhost:3000/users/all",{withCredentials:!0}).then((e=>{this.usersData.allUsers=e.data})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async getAllOtherUsers(){console.log("getAllOtherUsers"),await h().get("http://localhost:3000/users/public",{withCredentials:!0}).then((e=>{this.usersData.otherUsers=e.data})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async getCurrentUser(){console.log("getCurrentUser"),await h().get("http://localhost:3000/users/myuser",{withCredentials:!0}).then((e=>{this.usersData.currentUser=e.data})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async acceptFriendRequest(e){await h().post("http://localhost:3000/users/friend/accept/"+e,null,{withCredentials:!0}).then((e=>{console.log(e)})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},createFriendsList(e){console.log("createFriendsList"),this.usersData.friendsList.splice(0,this.usersData.friendsList.length),e.forEach((async e=>{this.usersData.friendsList.push(await this.getUserByID(e))}))},createRequestsList(){console.log("createRequestsList"),this.usersData.requestList.splice(0,this.usersData.requestList.length),this.usersData.currentUser.receivedFriendRequests.forEach((async e=>{this.usersData.requestList.push(await this.getUserByID(e))}))}},async created(){console.log("created"),await this.getAllUsers(),await this.getAllOtherUsers(),await this.getCurrentUser(),this.createFriendsList(this.usersData.currentUser.friends),this.createRequestsList()}};const at=(0,g.Z)(tt,[["render",fe],["__scopeId","data-v-19015c3c"]]);var st=at;const it=e=>((0,i.dD)("data-v-670dec20"),e=e(),(0,i.Cn)(),e),rt={class:"profile"},nt=it((()=>(0,i._)("h2",null,"Profile",-1))),lt=it((()=>(0,i._)("h3",null,"Status",-1))),ot={class:"status"},dt={class:"myUser"},ct=it((()=>(0,i._)("h3",null,"My User",-1))),ht={class:"change-image"},ut=it((()=>(0,i._)("h3",null,"Change Avatar",-1)));function gt(e,t,a,s,r,n){const l=(0,i.up)("UserCard"),o=(0,i.up)("ProfileChangeAvatar");return(0,i.wg)(),(0,i.iD)("div",rt,[nt,lt,(0,i._)("div",ot,[(0,i._)("button",{onClick:t[0]||(t[0]=e=>n.setUserStatus(0))},"Offline"),(0,i._)("button",{onClick:t[1]||(t[1]=e=>n.setUserStatus(1))},"Online"),(0,i._)("button",{onClick:t[2]||(t[2]=e=>n.setUserStatus(2))},"In a Game"),(0,i._)("button",{onClick:t[3]||(t[3]=e=>n.setUserStatus(3))},"Do not Disturb")]),(0,i._)("div",dt,[ct,r.currentUser?((0,i.wg)(),(0,i.j4)(l,{key:0,onEventHappened:n.updateUser,data:r.currentUser},null,8,["onEventHappened","data"])):(0,i.kq)("",!0)]),(0,i._)("div",ht,[ut,(0,i.Wm)(o,{onEventHappened:n.updateUser},null,8,["onEventHappened"])])])}const mt=e=>((0,i.dD)("data-v-5116ab54"),e=e(),(0,i.Cn)(),e),pt={class:"file"},vt=["src"],wt=mt((()=>(0,i._)("input",{type:"button",value:"Upload Image",onclick:"document.getElementById('selectedFile').click();"},null,-1)));function ft(e,t,a,n,l,o){return(0,i.wg)(),(0,i.iD)("div",pt,[(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>o.onSubmit&&o.onSubmit(...e)),["prevent"])),enctype:"multipart/form-data"},[l.previewImage?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.previewImage,class:"uploading-image",width:"100",height:"100"},null,8,vt)):(0,i.kq)("",!0),(0,i._)("input",{type:"file",ref:"file",id:"selectedFile",style:{display:"none"},onChange:t[0]||(t[0]=(...e)=>o.onSelect&&o.onSelect(...e))},null,544),wt,(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>o.emitEvent&&o.emitEvent(...e))},"Submit"),(0,i._)("h5",null,(0,r.zw)(l.message),1)],32)])}var bt={name:"ProfileChangeAvatar",emits:["eventHappened"],data(){return{previewImage:"",file:"",message:""}},methods:{emitEvent(){this.$emit("eventHappened")},onSelect(e){const t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=e=>{this.previewImage=e.target.result};const s=["image/jpeg","image/jpg","image/png"],i=this.$refs.file.files[0];this.file=i,s.includes(i.type)||(this.message="Filetype is wrong!!"),i.size>5e5&&(this.message="Too large, max size allowed is 500kb")},async onSubmit(){const e=new FormData;e.append("file",this.file);try{await h().post("http://localhost:3000/users/avatar/",e,{withCredentials:!0}),this.message="Uploaded!!"}catch(t){console.log(t),this.message=t.response.data.error}}}};const yt=(0,g.Z)(bt,[["render",ft],["__scopeId","data-v-5116ab54"]]);var kt=yt,_t={name:"ProfileView",components:{UserCard:xe,ProfileChangeAvatar:kt},data(){return{currentUser:null,errorMsg:""}},methods:{updateUser(){this.getCurrentUser()},async getCurrentUser(){console.log("getCurrentUser"),await h().get("http://localhost:3000/users/myuser",{withCredentials:!0}).then((e=>{this.currentUser=e.data})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))},async setUserStatus(e){await h().post("http://localhost:3000/users/update/status/"+e,null,{withCredentials:!0}).then((e=>{console.log(e),this.updateUser()})).catch((e=>{this.errorMsg="Error: "+e.response.data.message}))}},created(){this.getCurrentUser()}};const Ct=(0,g.Z)(_t,[["render",gt],["__scopeId","data-v-670dec20"]]);var Dt=Ct;const Pt=e=>((0,i.dD)("data-v-e48daaf4"),e=e(),(0,i.Cn)(),e),St={class:"wrapper"},Ut={class:"score"},Ft={class:"login"},xt=Pt((()=>(0,i._)("canvas",{width:"750",height:"585",id:"game"},null,-1))),qt={key:0,class:"pauseMenu"},At={key:0},Bt={key:1},Et={key:2},Ht={key:3};function It(e,t,a,s,n,l){return(0,i.wg)(),(0,i.iD)("div",St,[(0,i._)("div",Ut,[(0,i._)("div",null,(0,r.zw)(n.score.left),1),(0,i._)("div",null,(0,r.zw)(n.score.right),1)]),(0,i._)("div",Ft,[n.gameState.gameStarted?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>l.startGame&&l.startGame(...e)),class:"normal-text"},"Start Game")),n.gameState.gameStarted||n.gameState.gameSpecial?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:1,onClick:t[1]||(t[1]=(...e)=>l.gameSpecialOn&&l.gameSpecialOn(...e)),class:"normal-text"},"Specials")),!n.gameState.gameStarted&&n.gameState.gameSpecial?((0,i.wg)(),(0,i.iD)("button",{key:2,onClick:t[2]||(t[2]=(...e)=>l.gameSpecialOFF&&l.gameSpecialOFF(...e)),class:"green-text"},"Specials")):(0,i.kq)("",!0)]),xt,n.gameState.gamePaused||n.gameState.gameOver?((0,i.wg)(),(0,i.iD)("div",qt,[this.score.left>=this.score.limit?((0,i.wg)(),(0,i.iD)("h2",At,"PLAYER 1")):this.score.right>=this.score.limit?((0,i.wg)(),(0,i.iD)("h2",Bt,"PLAYER 2")):((0,i.wg)(),(0,i.iD)("h2",Et,"Game Paused")),n.gameState.gameOver?((0,i.wg)(),(0,i.iD)("h2",Ht,"WON")):(0,i.kq)("",!0),n.gameState.gamePaused?((0,i.wg)(),(0,i.iD)("button",{key:4,onClick:t[3]||(t[3]=(...e)=>l.pauseGame&&l.pauseGame(...e))},(0,r.zw)(l.pauseText),1)):(0,i.kq)("",!0),(0,i._)("button",{onClick:t[4]||(t[4]=(...e)=>l.restartGame&&l.restartGame(...e))},"Restart"),(0,i._)("button",{onClick:t[5]||(t[5]=(...e)=>l.exitGame&&l.exitGame(...e))},"Exit")])):(0,i.kq)("",!0)])}var Rt={name:"GameTesting",data(){return{canvas:null,context:null,grid:0,paddleHeight:0,maxPaddleY:0,paddleSpeed:10,ballSpeed:5,wallColor:"black",backgroundColor:"#EFEFEF",requestFrameID:0,actionIntervalID:0,gameState:{gamePaused:!1,gameOver:!1,gameStarted:!1,gameSpecial:!1},leftPaddle:{x:0,y:0,width:0,height:0,velocity:0,color:"black"},rightPaddle:{x:0,y:0,width:0,height:0,velocity:0,color:"black"},ball:{x:0,y:0,width:0,height:0,resetting:!1,velocityY:0,velocityX:0,color:"#185ADB"},score:{limit:5,left:0,right:0}}},methods:{drawPaddle(e,t,a,s,i){this.context.fillStyle=i,this.context.fillRect(e,t,a,s),this.context.fillRect(e,t,a,s)},drawBall(e,t,a,s){this.context.fillStyle=s,this.context.strokeStyle=s,this.context.arc(e+a,t+a,a,0,2*Math.PI),this.context.fill(),this.context.beginPath(),this.context.stroke()},drawBackground(e,t,a){this.context.fillStyle=a,this.context.fillRect(0,0,e,e)},drawWalls(e,t,a){this.context.fillStyle=a,this.context.fillRect(0,0,e,this.grid),this.context.fillRect(0,t-this.grid,e,t)},movePedals(){this.leftPaddle.y+=this.leftPaddle.velocity,this.rightPaddle.y+=this.rightPaddle.velocity,this.leftPaddle.y<this.grid?this.leftPaddle.y=this.grid:this.leftPaddle.y>this.maxPaddleY&&(this.leftPaddle.y=this.maxPaddleY),this.rightPaddle.y<this.grid?this.rightPaddle.y=this.grid:this.rightPaddle.y>this.maxPaddleY&&(this.rightPaddle.y=this.maxPaddleY)},moveBall(){this.ball.x+=this.ball.velocityX*=1.0008,this.ball.y+=this.ball.velocityY*=1.0008,this.ball.y<this.grid?(this.ball.y=this.grid,this.ball.velocityY*=-1):this.ball.y+this.grid>this.canvas.height-this.grid&&(this.ball.y=this.canvas.height-2*this.grid,this.ball.velocityY*=-1)},changeBallSpeed(e=5){this.ball.velocityX<0?this.ball.velocityX=-e:this.ball.velocityX=e,this.ball.velocityY<0?this.ball.velocityY=-e:this.ball.velocityY=e},changePedalSize(e,t){switch(t){case"increase":37.5!=e&&75!=e||(this.leftPaddle.height*=2,this.rightPaddle.height*=2,this.maxPaddleY=75==e?this.canvas.height-this.grid-2*this.paddleHeight:this.canvas.height-this.grid-this.paddleHeight);break;case"decrease":75!=e&&150!=e||(this.leftPaddle.height/=2,this.rightPaddle.height/=2,this.maxPaddleY=75==e?this.canvas.height-this.grid-this.paddleHeight/2:this.canvas.height-this.grid-this.paddleHeight);break}},collides(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y},ballCollision(){this.collides(this.ball,this.leftPaddle)?(this.ball.velocityX*=-1,this.ball.x=this.leftPaddle.x+this.leftPaddle.width):this.collides(this.ball,this.rightPaddle)&&(this.ball.velocityX*=-1,this.ball.x=this.rightPaddle.x-this.ball.width)},resetBall(){(this.ball.x<0||this.ball.x>this.canvas.width)&&!this.ball.resetting&&(this.ball.resetting=!0,this.ball.x<0&&this.score.right++,this.ball.x>this.canvas.width&&this.score.left++,(this.score.left>=this.score.limit||this.score.right>=this.score.limit)&&(this.gameState.gameOver=!0,this.endGame()),this.changeBallSpeed(5),setTimeout((()=>{this.ball.resetting=!1,this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height/2,this.ball.velocityY*=-1,this.ball.velocityX*=-1}),500))},reloadWindow(){location.reload()},goPageBack(){window.history.go(-1)},randomNumberBetween(e,t){return Math.floor(Math.random()*(t-e)+e)},hideHomeButtons(){document.getElementById("home-button").style.display="none",document.getElementById("logout-button").style.display="none"},showHomeButtons(){document.getElementById("home-button").style.display="block",document.getElementById("logout-button").style.display="block"},reversePedal(){this.paddleSpeed>0&&(this.paddleSpeed*=-1),this.leftPaddle.color="red",this.rightPaddle.color="red"},resetPedalSpeed(){14==this.paddleSpeed&&(this.paddleSpeed=10),this.paddleSpeed<0&&(this.paddleSpeed*=-1)},increasePedalSpeed(){this.paddleSpeed=14,this.leftPaddle.color="black",this.rightPaddle.color="black"},backgroundGrey(){this.backgroundColor="#EFEFEF",this.ball.color="#185ADB",this.leftPaddle.color="black",this.rightPaddle.color="black"},backgroundBlue(){this.backgroundColor="#185ADB",this.ball.color="#186ADB",this.leftPaddle.color="#186ADB",this.rightPaddle.color="#186ADB"},backgroundOrange(){this.backgroundColor="#FFC947",this.ball.color="#185ADB",this.leftPaddle.color="black",this.rightPaddle.color="black"},randomActions(){switch(this.randomNumberBetween(1,10)){case 1:this.changePedalSize(this.leftPaddle.height,"increase");break;case 2:this.changePedalSize(this.leftPaddle.height,"decrease");break;case 3:this.changeBallSpeed(2.5);break;case 4:this.changeBallSpeed(10);break;case 5:this.reversePedal();break;case 6:this.increasePedalSpeed();break;case 7:this.resetPedalSpeed(),this.backgroundGrey();break;case 8:this.resetPedalSpeed(),this.backgroundBlue();break;case 9:this.resetPedalSpeed(),this.backgroundOrange();break}},startActionInterval(){this.actionIntervalID=setInterval((()=>{console.log("action"),this.randomActions()}),7e3)},gameLoop(){this.requestFrameID=requestAnimationFrame(this.gameLoop),this.gameState.gamePaused||this.gameState.gameOver||(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(this.canvas.width,this.canvas.height,this.backgroundColor),this.movePedals(),this.drawPaddle(this.leftPaddle.x,this.leftPaddle.y,this.leftPaddle.width,this.leftPaddle.height,this.leftPaddle.color),this.drawPaddle(this.rightPaddle.x,this.rightPaddle.y,this.rightPaddle.width,this.rightPaddle.height,this.rightPaddle.color),this.moveBall(),this.resetBall(),this.ballCollision(),this.drawBall(this.ball.x,this.ball.y,this.ball.width/2,this.ball.color),this.drawWalls(this.canvas.width,this.canvas.height,this.wallColor))},startGame(){console.log("startGame"),this.hideHomeButtons(),this.resetBaseValues(),this.init(),this.gameState.gameSpecial&&(this.backgroundColor="#FFC947",this.startActionInterval()),this.runGameLoop()},gameSpecialOn(){this.gameState.gameSpecial=!0},gameSpecialOFF(){this.gameState.gameSpecial=!1},runGameLoop(){console.log("runGameLoop"),this.gameState.gameStarted=!0,this.requestFrameID=requestAnimationFrame(this.gameLoop)},pauseGame(){console.log("pauseGame"),this.gameState.gamePaused=!this.gameState.gamePaused,this.gameState.gameSpecial&&(this.gameState.gamePaused?clearInterval(this.actionIntervalID):this.startActionInterval())},restartGame(){console.log("restartGame"),this.endGame(),this.startGame()},endGame(){console.log("endGame"),window.cancelAnimationFrame(this.requestFrameID),clearInterval(this.actionIntervalID)},exitGame(){console.log("exitGame"),this.goPageBack()},resetBaseValues(){this.gameState.gameOver=!1,this.gameState.gamePaused=!1,this.gameState.gameStarted=!1,this.paddleSpeed=7,this.ballSpeed=5,this.score.limit=5,this.score.left=0,this.score.right=0,this.ball.color="#185ADB",this.leftPaddle.color="black",this.rightPaddle.color="black",this.wallColor="black",this.backgroundColor="#EFEFEF"},initCanvas(){this.canvas=document.getElementById("game"),this.context=this.canvas.getContext("2d"),this.grid=15,this.paddleHeight=5*this.grid,this.maxPaddleY=this.canvas.height-this.grid-this.paddleHeight},initPedals(){this.leftPaddle.x=2*this.grid,this.leftPaddle.y=this.canvas.height/2-this.paddleHeight/2,this.leftPaddle.width=this.grid,this.leftPaddle.height=this.paddleHeight,this.leftPaddle.velocity=0,this.rightPaddle.x=this.canvas.width-3*this.grid,this.rightPaddle.y=this.canvas.height/2-this.paddleHeight/2,this.rightPaddle.width=this.grid,this.rightPaddle.height=this.paddleHeight,this.rightPaddle.velocity=0},initBall(){this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height/2,this.ball.width=this.grid,this.ball.height=this.grid,this.ball.resetting=!1,this.ball.velocityX=this.ballSpeed,this.ball.velocityY=-this.ballSpeed},init(){this.initCanvas(),this.initPedals(),this.initBall()}},computed:{pauseText(){return this.gameState.gamePaused?"Continue":"Pause"}},unmounted(){console.log("unmounted"),this.endGame(),this.showHomeButtons()},created(){console.log("created"),document.addEventListener("keydown",(e=>{switch(e.key){case"ArrowUp":this.rightPaddle.velocity=-this.paddleSpeed;break;case"ArrowDown":this.rightPaddle.velocity=this.paddleSpeed;break;case"w":this.leftPaddle.velocity=-this.paddleSpeed;break;case"s":this.leftPaddle.velocity=this.paddleSpeed;break;case"p":!0===this.gameState.gameStarted&&!1===this.gameState.gameOver&&this.pauseGame();break;case"c":!0===this.gameState.gamePaused&&!0===this.gameState.gameStarted&&!1===this.gameState.gameOver&&this.pauseGame();break;case"Escape":!0===this.gameState.gameStarted&&!1===this.gameState.gameOver&&this.pauseGame();break;case"1":this.changePedalSize(this.leftPaddle.height,"increase");break;case"2":this.changePedalSize(this.leftPaddle.height,"decrease");break;case"z":this.score.left++;break;case".":this.score.right++;break}})),document.addEventListener("keyup",(e=>{switch(e.key){case"ArrowUp":this.rightPaddle.velocity=0;break;case"ArrowDown":this.rightPaddle.velocity=0;break;case"w":this.leftPaddle.velocity=0;break;case"s":this.leftPaddle.velocity=0;break}}))}};const Mt=(0,g.Z)(Rt,[["render",It],["__scopeId","data-v-e48daaf4"]]);var Lt=Mt,Tt=a(262),Ot=a(367);const zt={class:"text"},Gt={key:0,class:"sub-menu"},Yt=["onClick"];function Nt(e,t,a,s,n,l){return(0,i.wg)(),(0,i.iD)("div",{class:"dropdown",onClick:t[0]||(t[0]=(...e)=>l.toggleRiskLevels&&l.toggleRiskLevels(...e))},[(0,i._)("span",zt,(0,r.zw)(a.title),1),(0,i._)("i",{class:(0,r.C_)(["angle",n.isBottomSectionToggled?"angle-up":"angle-down"])},null,2),n.isBottomSectionToggled?((0,i.wg)(),(0,i.iD)("div",Gt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.options,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"menu-item",onClick:t=>l.setCurrentSelectedOption(e),key:e},(0,r.zw)(e.title),9,Yt)))),128))])):(0,i.kq)("",!0)])}var Vt={name:"Dropdown",props:["title","options"],data(){return{isBottomSectionToggled:!1}},methods:{toggleRiskLevels(){this.isBottomSectionToggled=!this.isBottomSectionToggled},setCurrentSelectedOption(e){this.$emit("setSelectedOption",e)}}};const Wt=(0,g.Z)(Vt,[["render",Nt],["__scopeId","data-v-0916080b"]]);var $t=Wt;const Zt={key:0,class:"modal"},jt={class:"text"},Xt={class:"choices"};function Kt(e,t,a,n,l,o){return a.show&&a.data?((0,i.wg)(),(0,i.iD)("div",Zt,[(0,i._)("div",jt,(0,r.zw)(a.data.alert),1),a.data.needInput?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>l.inputText=e)},null,512)),[[s.nr,l.inputText]]):(0,i.kq)("",!0),(0,i._)("div",Xt,[(0,i._)("button",{class:"cancel",onClick:t[1]||(t[1]=(...e)=>o.userCanceled&&o.userCanceled(...e))},"Cancel"),(0,i._)("button",{class:"confirm",onClick:t[2]||(t[2]=(...e)=>o.userConfirmed&&o.userConfirmed(...e))},(0,r.zw)(a.data.confirmText),1)])])):(0,i.kq)("",!0)}var Jt={name:"Popup",data(){return{inputText:""}},props:{data:{confirmText:{required:!0},alert:{required:!0},needInput:{default:!1}},show:{required:!0}},methods:{userConfirmed(){this.$emit("confirmed",{data:this.data,inputText:this.inputText}),this.inputText=""},userCanceled(){this.inputText="",this.$emit("canceled")}}};const Qt=(0,g.Z)(Jt,[["render",Kt],["__scopeId","data-v-63644720"]]);var ea=Qt,ta=a(907);const aa=(0,ta.MT)({state(){return{currentUser:null}},getters:{getCurrentUser:e=>e.currentUser},actions:{async fetchCurrentUser({commit:e}){await h().get("http://localhost:3000/users/myuser",{withCredentials:!0}).then((t=>{e("setCurrentUser",t.data)})).catch((e=>{console.log("Error "+e)}))}},mutations:{setCurrentUser(e,t){e.currentUser=t}}});var sa=aa;const ia=e=>((0,i.dD)("data-v-1b1698d1"),e=e(),(0,i.Cn)(),e),ra={class:"grid-container"},na={class:"header"},la={key:0},oa={key:1},da={class:"sidenav"},ca=ia((()=>(0,i._)("div",{class:"sidenav__tabs"},[(0,i._)("button",null,"Groups"),(0,i._)("button",null,"Personal")],-1))),ha={class:"sidenav__new_room"},ua={key:0,class:"room-name-error"},ga=ia((()=>(0,i._)("option",{value:"public"},"public",-1))),ma=ia((()=>(0,i._)("option",{value:"protected"},"protected",-1))),pa=ia((()=>(0,i._)("option",{value:"private"},"private",-1))),va=[ga,ma,pa],wa={class:"sidenav__rooms"},fa=ia((()=>(0,i._)("h3",null,"Available Rooms",-1))),ba={class:"room-name"},ya={class:"flex__row"},ka={class:"room-access"},_a=["onClick"],Ca=ia((()=>(0,i._)("br",null,null,-1))),Da=ia((()=>(0,i._)("h3",null,"My Rooms",-1))),Pa={key:0},Sa={class:"room-name"},Ua={class:"flex__row"},Fa={class:"room-access"},xa=["onClick"],qa={class:"main"},Aa={class:"main__messages"},Ba={class:"message__name"},Ea={class:"text"},Ha={key:0,class:"main__members"},Ia=["onClick"],Ra={class:"footer"};var Ma={__name:"ChatView",setup(e){const t=(0,Tt.iH)(null),a=(0,Tt.iH)(null),n=((0,Tt.iH)([]),(0,Tt.iH)([])),l=(0,Tt.iH)([]),o=(0,Tt.iH)([]),d=(0,Tt.iH)(""),c=(0,Tt.iH)(""),u=(0,Tt.iH)("public"),g=(0,Tt.iH)(""),m=(0,Tt.iH)(!1),p=(0,Tt.iH)(null),v="Menu",w=[{title:"Leave",alert:"Are you sure?",confirmText:"Leave",onlyAdmin:!1},{title:"Delete",alert:"Are you sure?",confirmText:"Delete",onlyAdmin:!0},{title:"Password",alert:"Set a password for the room",confirmText:"Save",onlyAdmin:!0,needInput:!0},{title:"Public",alert:"Make room public?\nNo more password required",confirmText:"Save",onlyAdmin:!0}],f=(0,Tt.iH)(""),b=e=>{f.value=e;setTimeout((()=>{f.value=""}),3e3)},y=(0,i.Fl)((()=>sa.getters.getCurrentUser)),k=(0,i.Fl)((()=>D(a.value,y.value.username)?w:w.filter((e=>!1===e.onlyAdmin)))),_=(0,i.Fl)((()=>n.value.filter((e=>!e.chatUser.some((e=>e.username===y.value.username))))));(0,i.wF)((async()=>{await sa.dispatch("fetchCurrentUser"),C(),Y(),t.value.on("message",(e=>{a.value&&e===a.value.name&&G(a.value.name)})),t.value.on("refreshMember",(e=>{a.value&&e===a.value.name&&z(a.value.name)})),t.value.on("refreshRooms",(()=>{Y()})),t.value.on("refreshUser",(()=>{sa.dispatch("fetchCurrentUser")})),t.value.on("refreshCurrentRoom",(async e=>{a.value&&e===a.value.name&&(await O(a.value.name),await sa.dispatch("fetchCurrentUser"))})),t.value.on("resetCurrentRoom",(e=>{a.value&&e===a.value.name&&(a.value=null,o.value=[],l.value=[])}))}));const C=()=>{t.value=(0,Ot.ZP)("http://localhost:3000",{extraHeaders:{Authorization:y.value.username}})},D=(e,t)=>{const a=e.admins.filter((e=>e.username===t));return a.length>0},P=e=>!!D(a.value,y.value.username)&&!D(a.value,e),S=(e,a)=>{t.value.emit("validateRoomAccess",{roomName:e,password:a},(t=>{t?q(e):(m.value=!1,B(e))}))},U=({data:e,inputText:t})=>{switch(e.title){case"Leave":I(a.value.name);break;case"Delete":R(a.value.name);break;case"Password":T(a.value.name,t);break;case"PasswordProtection":S(e.extraInfo,t);break;case"Public":L(a.value.name);break}m.value=!1},F=()=>{m.value=!1},x=e=>{p.value=e,m.value=!0},q=async e=>{x({title:"PasswordProtection",alert:"Enter Password",confirmText:"Join",needInput:!0,extraInfo:e})},A=()=>{t.value.emit("createRoom",{roomName:c.value,access:u.value,adminName:y.value.username,roomPassword:g.value},(e=>{e?sa.dispatch("fetchCurrentUser"):b(`Error: ${c.value} already exists`)})),c.value="",g.value="",u.value="public"},B=e=>{t.value.emit("joinRoom",{userName:y.value.username,roomName:e},(e=>{e&&(sa.dispatch("fetchCurrentUser"),Y())}))},E=async e=>{t.value.emit("enterRoom",e),await O(e),G(e),z(e)},H=e=>{t.value.emit("makeAdmin",{userName:e,roomName:a.value.name})},I=e=>{t.value.emit("leaveRoom",{userName:y.value.username,roomName:e},(e=>{e&&(sa.dispatch("fetchCurrentUser"),Y())})),a.value=null,o.value=[],l.value=[]},R=e=>{t.value.emit("deleteRoom",e,(e=>{e&&(a.value=null,o.value=[],l.value=[])}))},M=()=>{t.value.emit("sendMessage",{roomName:a.value.name,userName:y.value.username,message:d.value}),d.value=""},L=e=>{t.value.emit("setRoomPublic",e)},T=(e,a)=>{t.value.emit("setRoomProtected",{roomName:e,password:a})},O=async e=>{await h().get(`http://localhost:3000/chat/room/${e}`,{withCredentials:!0}).then((e=>{a.value=e.data})).catch((e=>{console.log("Error "+e.response.data.message)}))},z=e=>{t.value.emit("findRoomMembers",e,(e=>{l.value=e}))},G=e=>{t.value.emit("findRoomMessages",e,(e=>{o.value=e}))},Y=()=>{t.value.emit("findAllRooms",(e=>{n.value=e}))};return(e,t)=>((0,i.wg)(),(0,i.iD)("div",ra,[(0,i._)("header",na,[a.value?((0,i.wg)(),(0,i.iD)("div",la,(0,r.zw)(a.value.name),1)):(0,i.kq)("",!0),(0,Tt.SU)(y)?((0,i.wg)(),(0,i.iD)("div",oa,"Connected as: "+(0,r.zw)((0,Tt.SU)(y).username),1)):(0,i.kq)("",!0),a.value?((0,i.wg)(),(0,i.j4)($t,{key:2,onSetSelectedOption:t[0]||(t[0]=e=>x(e)),title:v,options:(0,Tt.SU)(k)},null,8,["options"])):(0,i.kq)("",!0)]),(0,i._)("aside",da,[ca,(0,i._)("div",ha,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),placeholder:"new room name"},null,512),[[s.nr,c.value]]),f.value?((0,i.wg)(),(0,i.iD)("div",ua,(0,r.zw)(f.value),1)):(0,i.kq)("",!0),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e)},va,512),[[s.bM,u.value]]),"protected"===u.value?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=e=>g.value=e),placeholder:"password"},null,512)),[[s.nr,g.value]]):(0,i.kq)("",!0),(0,i._)("button",{onClick:t[4]||(t[4]=e=>c.value?A():b("Name can't be blanc!"))},"Create")]),(0,i._)("div",wa,[fa,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,Tt.SU)(_),(e=>((0,i.wg)(),(0,i.iD)("div",{class:"room",key:e.name},[(0,i._)("div",ba,(0,r.zw)(e.name),1),(0,i._)("div",ya,[(0,i._)("small",ka,(0,r.zw)(e.access),1),(0,i._)("button",{onClick:t=>"protected"===e.access?q(e.name):B(e.name)},"Join",8,_a)])])))),128)),Ca,Da,(0,Tt.SU)(y)?((0,i.wg)(),(0,i.iD)("div",Pa,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,Tt.SU)(y).chatRoom,(e=>((0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["room",a.value&&a.value.name===e.name?"active":""]),key:e.name},[(0,i._)("div",Sa,(0,r.zw)(e.name),1),(0,i._)("div",Ua,[(0,i._)("small",Fa,(0,r.zw)(e.access),1),(0,i._)("button",{onClick:t=>E(e.name)},"Enter",8,xa)])],2)))),128))])):(0,i.kq)("",!0)])]),(0,i._)("main",qa,[(0,i._)("div",Aa,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.value,(e=>((0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["message",{blue_text:"ChatBot"===e.fromName,align_right:e.fromName===(0,Tt.SU)(y).username}]),key:e},[(0,i._)("div",Ba,"["+(0,r.zw)(e.fromName)+"]",1),(0,i._)("div",Ea,(0,r.zw)(e.text),1)],2)))),128))]),a.value&&(0,Tt.SU)(y)?((0,i.wg)(),(0,i.iD)("div",Ha,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.value,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"member",key:e},[(0,i.Uk)((0,r.zw)(e.username)+" ",1),P(e.username)?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t=>H(e.username)},"Admin",8,Ia)):(0,i.kq)("",!0)])))),128))])):(0,i.kq)("",!0)]),(0,i.Wm)(ea,{onCanceled:F,onConfirmed:t[5]||(t[5]=e=>U(e)),show:m.value,data:p.value},null,8,["show","data"]),(0,i._)("footer",Ra,[a.value?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,"onUpdate:modelValue":t[6]||(t[6]=e=>d.value=e),placeholder:"message"},null,512)),[[s.nr,d.value]]):(0,i.kq)("",!0),a.value?((0,i.wg)(),(0,i.iD)("button",{key:1,onClick:t[7]||(t[7]=e=>d.value?M():0)},"Send")):(0,i.kq)("",!0)])]))}};const La=(0,g.Z)(Ma,[["__scopeId","data-v-1b1698d1"]]);var Ta=La;const Oa=[{path:"/",name:"home",component:q},{path:"/2fa",name:"2factor",component:he},{path:"/login2fa",name:"login2fa",component:G},{path:"/scoreboard",name:"scoreboard",component:Q},{path:"/friends",name:"friends",component:st},{path:"/profile",name:"profile",component:Dt},{path:"/test",name:"test",component:Lt},{path:"/chat",name:"chat",component:Ta},{path:"/authentication/callback",name:"auth",component:q}],za=(0,v.p7)({history:(0,v.PO)("/"),routes:Oa});var Ga=za;(0,s.ri)(p).use(Ga).use(sa).mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,r){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],r=e[c][2];for(var l=!0,o=0;o<s.length;o++)(!1&r||n>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[o])}))?s.splice(o--,1):(l=!1,r<n&&(n=r));if(l){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,i,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,r,n=s[0],l=s[1],o=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(o)var c=o(a)}for(t&&t(s);d<n.length;d++)r=n[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(526)}));s=a.O(s)})();
//# sourceMappingURL=app.b1ddfae4.js.map